## Empirical Bayes Trend Filtering 

This repo has code and analysis for the Empirical Bayes Trend Filtering method. To create environment: `conda env create -f requirements.yaml`. The repo requires sereval R packages and can be installed using `VEBTF/notebook/install_r.ipynb`

## Code

EBTF source code is in the `src` folder; simulation code is in `VEBTF-paper/simulation`; real data analysis code is in `VEBTF-paper/realdata`. 

## Analysis

To re-produce the results in the paper: 

for simulation, run the `VEBTF-paper/simulation/run_simulation.sh` in the `VEBTF-paper` path  by running `./simulation/run_simulation.sh`, then use `VEBTF-paper/notebook/analyze_simu.ipynb` for getting metrics and plots.

For real dataset, the accelaration example is in `src/accel.ipynb`; The ETTh1, illness and weather examples are in the notebook `realdata/real_data_etth1.ipynb`, `realdata/real_data_illness.ipynb`, `realdata/real_data_weather.ipynb` respectively; To run the holdout evaluation, in the `VEBTF-paper` path, run `./realdata/run_realdata.sh`

The figures related to sparse EBTF are generated by `src/test_sparse.ipynb`